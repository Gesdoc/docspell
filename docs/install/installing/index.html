<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Eike Kettner">
<meta name="description" content="Simple Document Organizer">
<meta name="image" property="og:image" content="/img/poster.png">
<meta name="title" property="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:image" content="/img/poster.png">
<meta name="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:site_name" content="Installing - Docspell">
<meta name="og:url" content="">
<meta name="og:type" content="website">
<meta name="og:description" content="Simple Document Organizer">
<meta name="twitter:title" content="Docspell">
<meta name="twitter:image" content="/img/poster.png">
<meta name="twitter:description" content="Simple Document Organizer">
<meta name="twitter:card" content="summary_large_image">

<link rel="shortcut icon" href="/favicon-mc.ico" type="image/x-icon">
<link rel="icon" href="/favicon-mc.ico" type="image/x-icon">

        <title>Installing – Docspell Documentation</title>
        <link rel="stylesheet" href="/styles.css">
        <script type="application/javascript" src="/search_index.en.js"></script>
<script type="application/javascript" src="/elasticlunr.min.js"></script>
<script type="application/javascript" src="/js/bundle.js"></script>
<script type="application/javascript" src="/js/searchhelper.js"></script>

    </head>
    <body>
        <section class="hero is-info is-small">
            <div class="hero-head">
                <nav class="navbar">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <span class="icon">
                <img src="/icons/logo-only-36.svg">
            </span>
            <span>
                Docspell
            </span>
        </a>
    </div>
    <div class="navbar-start">
        <a target="_blank"
           href="https://github.com/eikek/docspell"
           class="navbar-item">
            <span class="icon">
                <img src="/icons/github-40.svg">
            </span>
            <span>
                Github
            </span>
        </a>
    </div>
</nav>

            </div>
            <div class="hero-body">
                <div class="columns is-vcentered">
                    <div class="column is-8">
                        <h1 class="title">
                            Installing
                        </h1>
                        <h2 class="subtitle">
                            Docspell Documentation
                        </h2>
                    </div>
                    <div class="column">
                        <id id="search"></id>
                    </div>
                </div>
            </div>
        </section>
        <nav class="breadcrumb has-succeeds-separator" aria-label="breadcrumbs">
            <ul>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;"></a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;">Overview</a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;">Installation and Deployment</a>
                </li>
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;installing&#x2F;">Installing</a>
                </li>
            </ul>
        </nav>

        <section class="section pt-2">
            <div class="columns is-desktop">
                <div class="column is-3">
                    <div class="menu">
                        <ul class="menu-list">
                            
                            

                            <p class="menu-label">
                                Installation and Deployment
                            </p>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/quickstart/"
                                   >
                                    Quickstart
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/prereq/"
                                   >
                                    Prerequisites
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/installing/"
                                   class="is-active">
                                    Installing
                                </a>
                                
                                <ul class="menu-list">
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;installing&#x2F;#docker">
                                            Docker
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;installing&#x2F;#download-unpack-run">
                                            Download, Unpack, Run
                                        </a>
                                        <ul>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;installing&#x2F;#using-zip-files">
                                                    Using zip files
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;installing&#x2F;#using-deb-files">
                                                    Using deb files
                                                </a>
                                            </li>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;installing&#x2F;#nix">
                                            Nix
                                        </a>
                                        <ul>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;installing&#x2F;#install-via-nix">
                                                    Install via Nix
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;installing&#x2F;#nixos">
                                                    Docspell on NixOS
                                                </a>
                                            </li>
                                            
                                        </ul>
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/running/"
                                   >
                                    Running
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/rpi/"
                                   >
                                    Raspberry-Pi And Similiar
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/reverseproxy/"
                                   >
                                    Reverse Proxy
                                </a>
                                
                            </li>
                            
                        </ul>
                    </div>
                </div>

                <div class="column is-9">
                    <div class="container">
                        <div class="content doc">
                            <h1 id="docker">Docker<a class="zola-anchor" href="#docker" aria-label="Anchor link for: docker">🔗</a></h1>
<p>There is a <a href="https://docs.docker.com/compose/">docker-compose</a> setup
available in the <code>/docker</code> folder. This setup is also taking care of
all the necessary <a href="https://docspell.org/docs/install/prereq/">prerequisites</a> and
creates a container to watch a directory for incoming files. It's only
3 steps:</p>
<ol>
<li>
<p>Clone the github repository</p>
<pre style="background-color:#282828;">
<code><span style="color:#fdf4c1;">$ git clone https://github.com/eikek/docspell
</span></code></pre></li>
<li>
<p>Change into the <code>docker</code> directory:</p>
<pre style="background-color:#282828;">
<code><span style="color:#fdf4c1;">$ cd docspell/docker
</span></code></pre></li>
<li>
<p>Run <code>docker-compose up</code>:</p>
<pre style="background-color:#282828;">
<code><span style="color:#fdf4c1;">$ export DOCSPELL_HEADER_VALUE=</span><span style="color:#b8bb26;">&quot;my-secret-123&quot;
</span><span style="color:#fdf4c1;">$ docker-compose up
</span></code></pre>
<p>The environment variable defines a secret that is shared between
some containers. You can define whatever you like. Please see the
<a href="https://docspell.org/docs/tools/consumedir/#docker">consumedir.sh</a> docs for
additional info.</p>
</li>
<li>
<p>Goto <code>http://localhost:7880</code>, signup and login. When signing up,
you can choose the same name for collective and user. Then login
with this name and the password.</p>
</li>
<li>
<p>(Optional) Create a folder <code>./docs/&lt;collective-name&gt;</code> (the name you
chose for the collective at registration) and place files in there
for importing them.</p>
</li>
</ol>
<p>The directory contains a file <code>docspell.conf</code> that you can
<a href="https://docspell.org/docs/configure/">modify</a> as needed.</p>
<h1 id="download-unpack-run">Download, Unpack, Run<a class="zola-anchor" href="#download-unpack-run" aria-label="Anchor link for: download-unpack-run">🔗</a></h1>
<p>You can install via zip or deb archives. Please see the
<a href="https://docspell.org/docs/install/prereq/">prerequisites</a> first.</p>
<h2 id="using-zip-files">Using zip files<a class="zola-anchor" href="#using-zip-files" aria-label="Anchor link for: using-zip-files">🔗</a></h2>
<p>You need to download the two files:</p>
<ul>
<li><a href="https://github.com/eikek/docspell/releases/download/v0.18.0/docspell-restserver-0.18.0.zip">docspell-restserver-0.18.0.zip</a></li>
<li><a href="https://github.com/eikek/docspell/releases/download/v0.18.0/docspell-joex-0.18.0.zip">docspell-joex-0.18.0.zip</a></li>
</ul>
<ol>
<li>Unzip both files:<pre style="background-color:#282828;">
<code><span style="color:#fdf4c1;">$ unzip docspell-</span><span style="color:#fe8019;">*</span><span style="color:#fdf4c1;">.zip
</span></code></pre></li>
<li>Open two terminal windows and navigate to the the directory
containing the zip files.</li>
<li>Start both components executing:<pre style="background-color:#282828;">
<code><span style="color:#fdf4c1;">$ ./docspell-restserver</span><span style="color:#fe8019;">*</span><span style="color:#fdf4c1;">/bin/docspell-restserver
</span></code></pre>in one terminal and<pre style="background-color:#282828;">
<code><span style="color:#fdf4c1;">$ ./docspell-joex</span><span style="color:#fe8019;">*</span><span style="color:#fdf4c1;">/bin/docspell-joex
</span></code></pre>in the other.</li>
<li>Point your browser to: <a href="http://localhost:7880/app">http://localhost:7880/app</a></li>
<li>Register a new account, sign in and try it.</li>
</ol>
<p>Note, that this setup doesn't include watching a directory. You can
use the <a href="https://docspell.org/docs/tools/consumedir/">consumedir.sh</a> tool for this or
use the docker variant below.</p>
<h2 id="using-deb-files">Using deb files<a class="zola-anchor" href="#using-deb-files" aria-label="Anchor link for: using-deb-files">🔗</a></h2>
<p>The DEB packages can be installed on Debian, or Debian based Distros:</p>
<pre style="background-color:#282828;">
<code><span style="color:#fdf4c1;">$ sudo dpkg -i docspell</span><span style="color:#fe8019;">*</span><span style="color:#fdf4c1;">.deb
</span></code></pre>
<p>Then the start scripts are in your <code>$PATH</code>. Run <code>docspell-restserver</code>
or <code>docspell-joex</code> from a terminal window.</p>
<p>The packages come with a systemd unit file that will be installed to
autostart the services.</p>
<h1 id="nix">Nix<a class="zola-anchor" href="#nix" aria-label="Anchor link for: nix">🔗</a></h1>
<h2 id="install-via-nix">Install via Nix<a class="zola-anchor" href="#install-via-nix" aria-label="Anchor link for: install-via-nix">🔗</a></h2>
<p>Docspell can be installed via the <a href="https://nixos.org/nix">nix</a> package
manager, which is available for Linux and OSX. Docspell is currently not
part of the <a href="https://nixos.org/nixpkgs/">nixpkgs collection</a>, but you
can use the derivation from this repository. This is sometimes
referred to as <a href="https://nixos.wiki/wiki/Import_From_Derivation">import from
derivation</a>.</p>
<p>For example, the <code>builtins.fetchTarball</code> function can be used to
retrieve the files; then import the <code>release.nix</code> file:</p>
<pre style="background-color:#282828;">
<code><span style="color:#fa5c4b;">let
  </span><span style="color:#8ec07c;">docspellsrc </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">builtins</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">fetchTarball </span><span style="color:#b8bb26;">&quot;https://github.com/eikek/docspell/archive/master.tar.gz&quot;</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fa5c4b;">in
</span><span style="color:#fabd2f;">import </span><span style="color:#b8bb26;">&quot;</span><span style="font-style:italic;color:#b8bb26;">${</span><span style="color:#fdf4c1;">docspellsrc</span><span style="font-style:italic;color:#b8bb26;">}</span><span style="color:#b8bb26;">/nix/release.nix&quot;</span><span style="background-color:#932b1e;color:#fdf4c1;">;</span><span style="color:#fdf4c1aa;">
</span></code></pre>
<p>This creates a set containing a function for creating a derivation for
docspell. This then needs to be called like other custom packages. For
example, in your <code>~/.nixpkgs/config.nix</code> you could write this:</p>
<pre style="background-color:#282828;">
<code><span style="color:#fa5c4b;">let
  </span><span style="color:#8ec07c;">docspellsrc </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">builtins</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">fetchTarball </span><span style="color:#b8bb26;">&quot;https://github.com/eikek/docspell/archive/master.tar.gz&quot;</span><span style="color:#fdf4c1aa;">;
  </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fabd2f;">import </span><span style="color:#b8bb26;">&quot;</span><span style="font-style:italic;color:#b8bb26;">${</span><span style="color:#fdf4c1;">docspellsrc</span><span style="font-style:italic;color:#b8bb26;">}</span><span style="color:#b8bb26;">/nix/release.nix&quot;</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fa5c4b;">in
</span><span style="color:#fdf4c1aa;">{ </span><span style="color:#8ec07c;">packageOverrides </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fdf4c1aa;">:
   </span><span style="color:#fa5c4b;">let
     </span><span style="color:#8ec07c;">callPackage </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">lib</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">callPackageWith</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">custom </span><span style="color:#fe8019;">// </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fdf4c1aa;">);
     </span><span style="color:#8ec07c;">custom </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
       </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">callPackage docspell</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">currentPkg </span><span style="color:#fdf4c1aa;">{};
     };
   </span><span style="color:#fa5c4b;">in </span><span style="color:#fdf4c1;">custom</span><span style="color:#fdf4c1aa;">;
}
</span></code></pre>
<p>The <code>docspell</code> custom package is again a set that contains derivations
for all 3 installable docspell programs: the restserver, joex and the
tools.</p>
<p>Then you can install docspell via <code>nix-shell</code> or <code>nix-env</code>, for example:</p>
<pre style="background-color:#282828;">
<code><span style="color:#fdf4c1;">$ nix-env -iA nixpkgs.docspell.server nixpkgs.docspell.joex nixpkgs.docspell.tools
</span></code></pre>
<p>You may need to replace <code>nixpkgs</code> with <code>nixos</code> when you're on NixOS.</p>
<p>The expression <code>docspell.currentPkg</code> refers to the most current
release of Docspell. So even if you use the tarball of the current
master branch, the <code>release.nix</code> file only contains derivations for
releases. The expression <code>docspell.currentPkg</code> is a shortcut for
selecting the most current release. For example it translates to
<code>docspell.pkg docspell.cfg.v0_18_0</code> – if the current version
is <code>0.18.0</code>.</p>
<h2 id="nixos">Docspell on NixOS<a class="zola-anchor" href="#nixos" aria-label="Anchor link for: nixos">🔗</a></h2>
<p>If you are running <a href="https://nixos.org">NixOS</a>, there is a module
definition for installing Docspell as a service using systemd.</p>
<p>There are the following modules provided:</p>
<ul>
<li>restserver</li>
<li>joex</li>
<li>consumedir</li>
</ul>
<p>The <code>consumedir</code> module defines a systemd unit that starts the
<code>consumedir.sh</code> script to watch one or more directories for new files.</p>
<p>You need to import the <code>release.nix</code> file as described above in your
<code>configuration.nix</code> and then append the docspell module to your list of
modules. Here is an example:</p>
<pre style="background-color:#282828;">
<code><span style="color:#d3869b;">{ </span><span style="color:#fdf4c1;">config</span><span style="color:#fe8019;">, </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">, ... </span><span style="color:#d3869b;">}</span><span style="color:#fdf4c1aa;">:
</span><span style="color:#fa5c4b;">let
  </span><span style="color:#8ec07c;">docspellsrc </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">builtins</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">fetchTarball </span><span style="color:#b8bb26;">&quot;https://github.com/eikek/docspell/archive/master.tar.gz&quot;</span><span style="color:#fdf4c1aa;">;
  </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fabd2f;">import </span><span style="color:#b8bb26;">&quot;</span><span style="font-style:italic;color:#b8bb26;">${</span><span style="color:#fdf4c1;">docspellsrc</span><span style="font-style:italic;color:#b8bb26;">}</span><span style="color:#b8bb26;">/nix/release.nix&quot;</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fa5c4b;">in
</span><span style="color:#fdf4c1aa;">{
  </span><span style="color:#8ec07c;">imports </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">[ </span><span style="color:#fdf4c1;">mymodule1 mymodule2 </span><span style="color:#fdf4c1aa;">] </span><span style="color:#fe8019;">++ </span><span style="color:#fdf4c1;">docspell</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">modules</span><span style="color:#fdf4c1aa;">;

  </span><span style="color:#8ec07c;">nixpkgs </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">config </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
      </span><span style="color:#8ec07c;">packageOverrides </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fdf4c1aa;">:
        </span><span style="color:#fa5c4b;">let
          </span><span style="color:#8ec07c;">callPackage </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">lib</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">callPackageWith</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">custom </span><span style="color:#fe8019;">// </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fdf4c1aa;">);
          </span><span style="color:#8ec07c;">custom </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
            </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">callPackage docspell</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">currentPkg </span><span style="color:#fdf4c1aa;">{};
          };
        </span><span style="color:#fa5c4b;">in </span><span style="color:#fdf4c1;">custom</span><span style="color:#fdf4c1aa;">;
    };
  };

  </span><span style="color:#8ec07c;">services</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">docspell-restserver </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#8ec07c;">base-url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;http://docspelltest:7880&quot;</span><span style="color:#fdf4c1aa;">;
    </span><span style="font-style:italic;color:#928374;"># ... more settings here
  </span><span style="color:#fdf4c1aa;">};
  </span><span style="color:#8ec07c;">services</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">docspell-joex </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#8ec07c;">base-url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;http://docspelltexst:7878&quot;</span><span style="color:#fdf4c1aa;">;
    </span><span style="font-style:italic;color:#928374;"># ... more settings here
  </span><span style="color:#fdf4c1aa;">};
  </span><span style="color:#8ec07c;">services</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">docspell-consumedir </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#8ec07c;">watchDirs </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">[</span><span style="color:#b8bb26;">&quot;/tmp/test&quot;</span><span style="color:#fdf4c1aa;">];
    </span><span style="color:#8ec07c;">urls </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">[</span><span style="color:#b8bb26;">&quot;http://localhost:7880/api/v1/open/upload/item/the-source-id&quot;</span><span style="color:#fdf4c1aa;">];
  };

  ...
}

</span></code></pre>
<p>Please see the <code>nix/module-server.nix</code> and <code>nix/module-joex.nix</code> files
for the set of options. The nixos options are modelled after the
default configuration file.</p>
<p>The modules files are only applicable to the newest version of
Docspell. If you really need an older version, checkout the
appropriate commit.</p>
<h3 id="nixos-example">NixOS Example<a class="zola-anchor" href="#nixos-example" aria-label="Anchor link for: nixos-example">🔗</a></h3>
<p>This is a example system configuration that installs docspell with a
postgres database. This snippet can be used to create a vm (using
<code>nixos-rebuild build-vm</code> as shown above) or a container, for example.</p>
<pre style="background-color:#282828;">
<code><span style="color:#d3869b;">{ </span><span style="color:#fdf4c1;">config</span><span style="color:#fe8019;">, </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">, ... </span><span style="color:#d3869b;">}</span><span style="color:#fdf4c1aa;">:
</span><span style="color:#fa5c4b;">let
  </span><span style="color:#8ec07c;">docspellsrc </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">builtins</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">fetchTarball </span><span style="color:#b8bb26;">&quot;https://github.com/eikek/docspell/archive/master.tar.gz&quot;</span><span style="color:#fdf4c1aa;">;
  </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fabd2f;">import </span><span style="color:#b8bb26;">&quot;</span><span style="font-style:italic;color:#b8bb26;">${</span><span style="color:#fdf4c1;">docspellsrc</span><span style="font-style:italic;color:#b8bb26;">}</span><span style="color:#b8bb26;">/nix/release.nix&quot;</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fa5c4b;">in
</span><span style="color:#fdf4c1aa;">{
  </span><span style="color:#8ec07c;">imports </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">docspell</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">modules</span><span style="color:#fdf4c1aa;">;

  </span><span style="color:#8ec07c;">nixpkgs </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">config </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
      </span><span style="color:#8ec07c;">packageOverrides </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fdf4c1aa;">:
        </span><span style="color:#fa5c4b;">let
          </span><span style="color:#8ec07c;">callPackage </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">lib</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">callPackageWith</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">custom </span><span style="color:#fe8019;">// </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fdf4c1aa;">);
          </span><span style="color:#8ec07c;">custom </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
            </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">callPackage docspell</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">currentPkg </span><span style="color:#fdf4c1aa;">{};
          };
        </span><span style="color:#fa5c4b;">in </span><span style="color:#fdf4c1;">custom</span><span style="color:#fdf4c1aa;">;
    };
  };

  </span><span style="font-style:italic;color:#928374;">##### just for the example…
  </span><span style="color:#8ec07c;">users</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">users</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">root </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">password </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;root&quot;</span><span style="color:#fdf4c1aa;">;
  };
  </span><span style="font-style:italic;color:#928374;">#####

  # install docspell-joex and enable the systemd service
  </span><span style="color:#8ec07c;">services</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">docspell-joex </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#8ec07c;">base-url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;http://localhost:7878&quot;</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#8ec07c;">bind </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
      </span><span style="color:#8ec07c;">address </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;0.0.0.0&quot;</span><span style="color:#fdf4c1aa;">;
      </span><span style="color:#8ec07c;">port </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">7878</span><span style="color:#fdf4c1aa;">;
    };
    </span><span style="color:#8ec07c;">scheduler </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
      </span><span style="color:#8ec07c;">pool-size </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">1</span><span style="color:#fdf4c1aa;">;
    };
    </span><span style="color:#8ec07c;">jdbc </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
      </span><span style="color:#8ec07c;">url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;jdbc:postgresql://localhost:5432/docspell&quot;</span><span style="color:#fdf4c1aa;">;
      </span><span style="color:#8ec07c;">user </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspell&quot;</span><span style="color:#fdf4c1aa;">;
      </span><span style="color:#8ec07c;">password </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspell&quot;</span><span style="color:#fdf4c1aa;">;
    };
  };

  </span><span style="font-style:italic;color:#928374;"># install docspell-restserver and enable the systemd service
  </span><span style="color:#8ec07c;">services</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">docspell-restserver </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#8ec07c;">base-url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;http://localhost:7880&quot;</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#8ec07c;">bind </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
      </span><span style="color:#8ec07c;">address </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;0.0.0.0&quot;</span><span style="color:#fdf4c1aa;">;
      </span><span style="color:#8ec07c;">port </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">7880</span><span style="color:#fdf4c1aa;">;
    };
    </span><span style="color:#8ec07c;">auth </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
      </span><span style="color:#8ec07c;">server-secret </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;b64:EirgaudMyNvWg4TvxVGxTu-fgtrto4ETz--Hk9Pv2o4=&quot;</span><span style="color:#fdf4c1aa;">;
    };
    </span><span style="color:#8ec07c;">backend </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
      </span><span style="color:#8ec07c;">signup </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
        </span><span style="color:#8ec07c;">mode </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;invite&quot;</span><span style="color:#fdf4c1aa;">;
        </span><span style="color:#8ec07c;">new-invite-password </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;dsinvite2&quot;</span><span style="color:#fdf4c1aa;">;
        </span><span style="color:#8ec07c;">invite-time </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;30 days&quot;</span><span style="color:#fdf4c1aa;">;
      };
      </span><span style="color:#8ec07c;">jdbc </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
        </span><span style="color:#8ec07c;">url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;jdbc:postgresql://localhost:5432/docspell&quot;</span><span style="color:#fdf4c1aa;">;
        </span><span style="color:#8ec07c;">user </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspell&quot;</span><span style="color:#fdf4c1aa;">;
        </span><span style="color:#8ec07c;">password </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspell&quot;</span><span style="color:#fdf4c1aa;">;
      };
    };
  };

  </span><span style="font-style:italic;color:#928374;"># install postgresql and initially create user/database
  </span><span style="color:#8ec07c;">services</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">postgresql </span><span style="color:#fe8019;">=
  </span><span style="color:#fa5c4b;">let
    </span><span style="color:#8ec07c;">pginit </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">writeText </span><span style="color:#b8bb26;">&quot;pginit.sql&quot; &#39;&#39;
      CREATE USER docspell WITH PASSWORD &#39;docspell&#39; LOGIN CREATEDB;
      GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO docspell;
      GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO docspell;
      CREATE DATABASE DOCSPELL OWNER &#39;docspell&#39;;
    &#39;&#39;</span><span style="color:#fdf4c1aa;">;
  </span><span style="color:#fa5c4b;">in </span><span style="color:#fdf4c1aa;">{
      </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span style="color:#fdf4c1aa;">;
      </span><span style="color:#8ec07c;">package </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">postgresql_11</span><span style="color:#fdf4c1aa;">;
      </span><span style="color:#8ec07c;">enableTCPIP </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span style="color:#fdf4c1aa;">;
      </span><span style="color:#8ec07c;">initialScript </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pginit</span><span style="color:#fdf4c1aa;">;
      </span><span style="color:#8ec07c;">port </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">5432</span><span style="color:#fdf4c1aa;">;
      </span><span style="color:#8ec07c;">authentication </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&#39;&#39;
        host  all  all 0.0.0.0/0 md5
      &#39;&#39;</span><span style="color:#fdf4c1aa;">;
  };


  </span><span style="color:#8ec07c;">networking </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">hostName </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspellexample&quot;</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#8ec07c;">firewall</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">allowedTCPPorts </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1aa;">[</span><span style="color:#d3869b;">7880</span><span style="color:#fdf4c1aa;">];
  };
}
</span></code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <span>
                Docspell, 0.18.0
            </span>
            <span class="ml-1 mr-1">•</span>
            <a href="https://spdx.org/licenses/GPL-3.0-or-later.html" target="_blank">GPLv3+</a>
            <span class="ml-1 mr-1">•</span>
            <a href="https://github.com/eikek/docspell" target="_blank">
                Source Code
            </a>
            <span class="ml-1 mr-1">•</span>
            <span>
                <a href="https://gitter.im/eikek/docspell">Chat on Gitter</a>
            </span>
        </div>
    </div>
    
</footer>

    </body>
    <script>
 var initSearch = function() {
     var elmSearch = Elm.Search.init({
         node: document.getElementById("search"),
         flags: {}
     });
     initElmSearch(elmSearch);
 }
 if (document.readyState === "complete" ||
     (document.readyState !== "loading" && !document.documentElement.doScroll)
 ) {
     initSearch();
 } else {
     document.addEventListener("DOMContentLoaded", initSearch);
 }
</script>

    <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
<script>
 (function(f, a, t, h, o, m){
     a[h]=a[h]||function(){
         (a[h].q=a[h].q||[]).push(arguments)
     };
     o=f.createElement('script'),
     m=f.getElementsByTagName('script')[0];
     o.async=1; o.src=t; o.id='fathom-script';
     m.parentNode.insertBefore(o,m)
 })(document, window, '//webstats.daheim.site/tracker.js', 'fathom');
 fathom('set', 'siteId', 'OGJDF');
 fathom('trackPageview');
</script>
<!-- / Fathom -->

</html>
