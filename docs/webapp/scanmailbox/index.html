<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Eike Kettner">
<meta name="description" content="Simple Document Organizer">
<meta name="image" property="og:image" content="/img/poster.png">
<meta name="title" property="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:image" content="/img/poster.png">
<meta name="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:site_name" content="Scan Mailboxes - Docspell">
<meta name="og:url" content="">
<meta name="og:type" content="website">
<meta name="og:description" content="Simple Document Organizer">
<meta name="twitter:title" content="Docspell">
<meta name="twitter:image" content="/img/poster.png">
<meta name="twitter:description" content="Simple Document Organizer">
<meta name="twitter:card" content="summary_large_image">

<link rel="shortcut icon" href="/favicon-mc.ico" type="image/x-icon">
<link rel="icon" href="/favicon-mc.ico" type="image/x-icon">

        <title>Scan Mailboxes – Docspell Documentation</title>
        <link rel="stylesheet" href="/styles.css">
    </head>
    <body>
        <section class="hero is-info is-small">
            <div class="hero-head">
                <nav class="navbar">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <span class="icon">
                <img src="/icons/logo-only-36.svg">
            </span>
            <span>
                Docspell
            </span>
        </a>
    </div>
    <div class="navbar-start">
        <a target="_blank"
           href="https://github.com/eikek/docspell"
           class="navbar-item">
            <span class="icon">
                <img src="/icons/github-40.svg">
            </span>
            <span>
                Github
            </span>
        </a>
    </div>
</nav>

            </div>
            <div class="hero-body">
                <h1 class="title">
                    Scan Mailboxes
                </h1>
                <h2 class="subtitle">
                    Docspell Documentation
                </h2>
            </div>
        </section>
        <nav class="breadcrumb has-succeeds-separator" aria-label="breadcrumbs">
            <ul>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;"></a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;">Overview</a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;">Web-UI</a>
                </li>
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;scanmailbox&#x2F;">Scan Mailboxes</a>
                </li>
            </ul>
        </nav>

        <section class="section pt-2">
            <div class="columns is-desktop">
                <div class="column is-3">
                    <div class="menu">
                        <ul class="menu-list">
                            
                            

                            <p class="menu-label">
                                Web-UI
                            </p>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/uploading/"
                                   >
                                    Uploads
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/metadata/"
                                   >
                                    Meta Data
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/curate/"
                                   >
                                    Curate Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/finding/"
                                   >
                                    Finding Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/emailsettings/"
                                   >
                                    E-Mail Settings
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/mailitem/"
                                   >
                                    Send Items Via E-Mail
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/notifydueitems/"
                                   >
                                    Notify About Due Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/scanmailbox/"
                                   class="is-active">
                                    Scan Mailboxes
                                </a>
                                
                                <ul class="menu-list">
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;scanmailbox&#x2F;#details">
                                            Details
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;scanmailbox&#x2F;#reading-mails-twice-duplicates">
                                            Reading Mails twice &#x2F; Duplicates
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;scanmailbox&#x2F;#how-it-works">
                                            How it works
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/processing/"
                                   >
                                    Processing Queue
                                </a>
                                
                            </li>
                            
                        </ul>
                    </div>
                </div>

                <div class="column is-9">
                    <div class="container">
                        <div class="content doc">
                            <p>User that provide valid email (imap) settings, can import mails from
their mailbox into docspell periodically.</p>
<p>You need first define imap settings, please see <a href="https://docspell.org/docs/webapp/emailsettings/#imap-settings">this
page</a>.</p>
<p>Go to <em>User Settings -&gt; Scan Mailbox Task</em>. You can define periodic
tasks that connects to your mailbox and import mails into docspell. It
is possible to define multiple tasks, for example, if you have
multiple e-mail accounts you want to import periodically.</p>
<figure class="image">
    <img src="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;scanmailbox-list.png">
</figure>
<h1 id="details">Details<a class="zola-anchor" href="#details" aria-label="Anchor link for: details">🔗</a></h1>
<p>Creating a task requires the following information:</p>
<figure class="image">
    <img src="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;scanmailbox-detail.png">
</figure>
<p>You can enable or disable this task. A disabled task will not run
periodically. You can still choose to run it manually if you click the
<code>Start Once</code> button.</p>
<p>Then you need to specify which <a href="https://docspell.org/docs/webapp/emailsettings/#imap-settings">IMAP
connection</a> to use.</p>
<p>A list of folders is required. Docspell will only look into these
folders. You can specify multiple folders. The &quot;Inbox&quot; folder is a
special folder, which will usually appear translated in your web-mail
client. You can specify &quot;INBOX&quot; case insensitive, it will then read
mails in your inbox. Any other folder is usually case-sensitive
(depends on the imap server, but usually they are case sensitive
except the INBOX folder). Type in a folder name and click the add
button on the right.</p>
<p>Then the field <em>Received Since Hours</em> defines how many hours to go
back and look for mails. Usually there are many mails in your inbox
and importing them all at once is not feasible or desirable. It can
work together with the <em>Schedule</em> field below. For example, you could
run this task all 6 hours and read mails from 8 hours back.</p>
<p>The next two settings tell docspell what to do once a mail has been
submitted to docspell. It can be moved into another folder in your
mail account. This moves it out of the way for the next run. You can
also choose to delete the mail, but <em>note that it will really be
deleted and not moved to your trash folder</em>. If both options are off,
nothing happens with that mail, it simply stays (and could be re-read
on the next run).</p>
<p>When docspell creates an item from a mail, it needs to set a direction
value (incoming or outgoing). If you know that all mails you want to
import have a specific directon, then you can set it here. Otherwise,
<em>automatic</em> means that docspell chooses a direction based on the
<code>From</code> header of a mail. If the <code>From</code> header is an e-mail address
that belongs to a “concerning” person in your address book, then it is
set to &quot;outgoing&quot;. Otherwise it is set to &quot;incoming&quot;. To support this,
you need to add your own e-mail address(es) to your address book.</p>
<p>The <em>Item Folder</em> setting is used to put all items that are created
from mails into the specified <a href="https://docspell.org/docs/webapp/scanmailbox/metadata#folders">folder</a>. If you
define a folder here, where you are not a member, you won't find
resulting items.</p>
<p>The last field is the <em>Schedule</em> which defines when and how often this
task should run. The syntax is similiar to a date-time string, like
<code>2019-09-15 12:32</code>, where each part is a pattern to also match multple
values. The ui tries to help a little by displaying the next two
date-times this task would execute. A more in depth help is available
<a href="https://github.com/eikek/calev#what-are-calendar-events">here</a>. For
example, to execute the task every monday at noon, you would write:
<code>Mon *-*-* 12:00</code>. A date-time part can match all values (<code>*</code>), a list
of values (e.g. <code>1,5,12,19</code>) or a range (e.g. <code>1..9</code>). Long lists may
be written in a shorter way using a repetition value. It is written
like this: <code>1/7</code> which is the same as a list with <code>1</code> and all
multiples of <code>7</code> added to it. In other words, it matches <code>1</code>, <code>1+7</code>,
<code>1+7+7</code>, <code>1+7+7+7</code> and so on.</p>
<h1 id="reading-mails-twice-duplicates">Reading Mails twice / Duplicates<a class="zola-anchor" href="#reading-mails-twice-duplicates" aria-label="Anchor link for: reading-mails-twice-duplicates">🔗</a></h1>
<p>Since users can move around mails in their mailboxes, it can happen
that docspell unintentionally reads a mail multiple times. If docspell
reads a mail, it will first check if an item already exists that
originated from this mail. It only proceeds to import it, if it cannot
find any. If you deleted an item in the meantime, docspell would
import the mail again.</p>
<p>This check uses the
<a href="https://en.wikipedia.org/wiki/Message-ID"><code>Message-ID</code></a> of an e-mail.
This is usually there and should identify a complete mail. But it
won't catch duplicate mails, that are sent multiple times - they might
have different <code>Message-ID</code>s. Also some mails have no such ids and are
then imported from docspell without any checks.</p>
<p>In later versions, docspell may use the checksum of the generated eml
file to look for duplicates, too.</p>
<h1 id="how-it-works">How it works<a class="zola-anchor" href="#how-it-works" aria-label="Anchor link for: how-it-works">🔗</a></h1>
<p>Docspell will go through all folders and download mails in “batches”.
This size can be set by the admin in the <a href="https://docspell.org/docs/configure/#joex">configuration
file</a> and applies to all these tasks
(same for all users). This batch only contains the mail headers and
not the complete mail.</p>
<p>Then each mail is downloaded completely one by one and converted into
an <a href="https://en.wikipedia.org/wiki/Email#Filename_extensions">eml</a> file
which is then submitted to docspell. Then the usual processing
machinery starts, just like uploading an eml file via the webapp.</p>
<p>The number of folders and the number of mails to import can be limited
by an admin via the config file. Note that this limit applies to one
task run only, it is meant to reduce resource allocation of one task.</p>

                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <span>
                Docspell, 0.11.1
            </span>
            <span class="ml-1 mr-1">•</span>
            <a href="https://spdx.org/licenses/GPL-3.0-or-later.html" target="_blank">GPLv3+</a>
            <span class="ml-1 mr-1">•</span>
            <a href="https://github.com/eikek/docspell" target="_blank">
                Source Code
            </a>
            <span class="ml-1 mr-1">•</span>
            <span>
                © 2020
                <a href="https://github.com/eikek" target="_blank">
                    @eikek
                </a>
            </span>
        </div>
    </div>
    
</footer>

    </body>
    <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
    <script>
     (function(f, a, t, h, o, m){
         a[h]=a[h]||function(){
             (a[h].q=a[h].q||[]).push(arguments)
         };
         o=f.createElement('script'),
         m=f.getElementsByTagName('script')[0];
         o.async=1; o.src=t; o.id='fathom-script';
         m.parentNode.insertBefore(o,m)
     })(document, window, '//webstats.daheim.site/tracker.js', 'fathom');
     fathom('set', 'siteId', 'OGJDF');
     fathom('trackPageview');
    </script>
    <!-- / Fathom -->
</html>
